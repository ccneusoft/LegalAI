# 案情速览技能 - 集成检查清单

## 🚀 开发集成进度追踪

使用此清单跟踪技能从创建到上线的全生命周期。

---

## ✅ 第一阶段：环境准备（开发者自查）

- [ ] 克隆/更新项目代码
- [ ] 进入 `SKILLs/case-overview-v1` 目录
- [ ] 阅读 `SKILL.md` 了解技能概况
- [ ] 阅读 `README.md` 了解项目结构
- [ ] 阅读 `IMPLEMENTATION_GUIDE.md` 了解集成流程

---

## ✅ 第二阶段：执行脚本实现（후端开发）

### 大模型集成

- [ ] 补充 `scripts/case-overview-executor.js` 中的 `callAnthropicClaude()` 方法
  - [ ] 调用 Claude API
  - [ ] 处理 API 响应
  - [ ] 实现错误处理
  
- [ ] 补充 `callOpenAI()` 方法（可选）
  - [ ] 调用 OpenAI API
  - [ ] 兼容 OpenAI 消息格式
  
- [ ] 补充 `callBaiduYiyan()` 方法（可选）
  - [ ] 调用文心一言 API

### 验证与测试

- [ ] 本地测试脚本执行
  ```bash
  node scripts/case-overview-executor.js < test-input.json
  ```
  - [ ] 输出为有效的 JSON
  - [ ] `status` 字段为 "success"
  - [ ] 包含完整的 `mindmap_markdown`
  - [ ] 包含 `structured_data`
  - [ ] `confidence` 值在 0.8 以上

- [ ] 测试错误处理
  - [ ] 缺少必填参数时返回错误
  - [ ] 无效的罪名类型时使用通用模板
  - [ ] LLM 超时时的重试机制
  - [ ] 错误响应的格式正确

---

## ✅ 第三阶段：Prompt模板优化（法律咨询）

### 模板审查

- [ ] 审查 `prompts/prompts.yaml` 中的 8 类罪名 Prompt
  - [ ] 故意伤害罪
    - [ ] 五大部分结构完整
    - [ ] 关键字段说明清晰
    - [ ] 法律条文准确
    
  - [ ] 危险驾驶罪
    - [ ] 血检报告相关要求
    - [ ] 酒精含量记录方式
    
  - [ ] 帮助信息网络犯罪活动罪
    - [ ] 明知程度认定逻辑
    - [ ] 流水金额统计方式
    
  - [ ] 盗窃罪
    - [ ] 数额认定标准
    - [ ] 赃物价值评估方式
    
  - [ ] 交通肇事罪
    - [ ] 责任认定标准
    - [ ] 逃逸情节处理
    
  - [ ] 赌博罪
    - [ ] 赌资计算方式
    - [ ] 抽头渔利认定
    
  - [ ] 开设赌场罪
    - [ ] 经营性与聚众的区分
    - [ ] 参与人员角色分工
    
  - [ ] 通用罪名
    - [ ] 适用条件清晰

### 模板优化

- [ ] 精化每个 Prompt 的例子和说明
- [ ] 测试边界案例（特殊情况）
- [ ] 获取法律专家反馈
- [ ] 更新 Prompt 版本号

---

## ✅ 第四阶段：前端集成（前端开发）

### 组件集成

- [ ] 导入 `CaseOverviewView` 组件
  ```javascript
  import CaseOverviewView from '@/SKILLs/case-overview-v1/templates/CaseOverviewView';
  ```

- [ ] 在案件详情页面集成
  - [ ] 添加"案情速览"按钮或菜单项
  - [ ] 点击时打开组件
  - [ ] 传入正确的 `caseData` props

- [ ] 验证 Markmap 渲染
  - [ ] npm install markmap-view markmap-lib
  - [ ] 思维导图正确显示
  - [ ] 层级展开/收起正常
  - [ ] 节点可点击

- [ ] 验证工具栏功能
  - [ ] 放大/缩小按钮
  - [ ] 适应屏幕按钮
  - [ ] 全部展开/收起
  - [ ] 导出 PNG 功能

### 样式集成

- [ ] 导入 `CaseOverviewView.css`
- [ ] 验证浅色主题
- [ ] 验证深色主题
- [ ] 验证响应式布局（平板/手机）
- [ ] 验证字体和颜色是否符合品牌规范

### Cowork 服务集成

- [ ] 确保 `window.electron.cowork` 能调用技能
- [ ] 测试通过 Claude Cowork 调用案情速览
  ```
  请为这个案件生成案情速览思维导图：
  [案件信息]
  ```

---

## ✅ 第五阶段：完整测试（QA 测试）

### 功能测试

- [ ] **正常流程测试**
  - [ ] 输入有效的4部分信息
  - [ ] 生成速度 < 5 秒
  - [ ] 输出包含所有5个二级标题
  - [ ] 思维导图能正常展示

- [ ] **各罪名类型测试**（为每个罪名准备测试用例）
  - [ ] 故意伤害罪：[准备示例案件]
  - [ ] 危险驾驶罪：[准备示例案件]
  - [ ] 帮信罪：[准备示例案件]
  - [ ] 盗窃罪：[准备示例案件]
  - [ ] 交通肇事罪：[准备示例案件]
  - [ ] 赌博罪：[准备示例案件]
  - [ ] 开设赌场罪：[准备示例案件]
  - [ ] 通用罪名：[准备示例案件（超出7类的罪名）]

- [ ] **边界情况测试**
  - [ ] 超长输入（每部分 5000+ 字）
  - [ ] 超短输入（每部分 < 50 字）
  - [ ] 特殊字符和符号
  - [ ] 多嫌疑人情况
  - [ ] 无被害人情况（如诈骗罪）

- [ ] **错误处理测试**
  - [ ] 缺少 case_id
  - [ ] 缺少 charge_type
  - [ ] 缺少 content 字段
  - [ ] 无效的 expand_level（0 或 7）
  - [ ] LLM API 超时
  - [ ] 网络错误

### 性能测试

- [ ] **响应时间**
  - [ ] 单个请求：< 5 秒
  - [ ] 平均响应时间：2-3 秒
  - [ ] P95 响应时间：< 8 秒
  - [ ] P99 响应时间：< 10 秒

- [ ] **并发测试**
  - [ ] 5 个并发请求
  - [ ] 10 个并发请求
  - [ ] 系统无崩溃，响应正常

- [ ] **输出大小**
  - [ ] Markdown 输出：< 10KB
  - [ ] JSON 响应：< 20KB
  - [ ] 前端渲染无延迟

### 安全测试

- [ ] **敏感信息处理**
  - [ ] 身份证号脱敏（日志中）
  - [ ] 联系方式脱敏（日志中）
  - [ ] API 密钥不能暴露
  - [ ] 无 SQL 注入风险

- [ ] **访问控制**
  - [ ] 仅授权用户能调用
  - [ ] 不同角色的权限分离
  - [ ] 审计日志完整

### UI/UX 测试

- [ ] **浏览器兼容性**
  - [ ] Chrome 最新版
  - [ ] Firefox 最新版
  - [ ] Safari（macOS）
  - [ ] Edge（Windows）

- [ ] **无障碍测试**
  - [ ] 键盘导航
  - [ ] 屏幕阅读器支持
  - [ ] 颜色对比度

- [ ] **用户体验**
  - [ ] 加载动画清晰
  - [ ] 错误提示友好
  - [ ] 按钮反馈明显
  - [ ] 信息层次清晰

---

## ✅ 第六阶段：文档完善（文档编写）

- [ ] 补充使用示例
  - [ ] 命令行使用示例
  - [ ] API 调用示例
  - [ ] React 组件集成示例

- [ ] 补充故障排查指南
  - [ ] 常见错误原因
  - [ ] 解决方案
  - [ ] 日志查看方式

- [ ] 补充最佳实践指南
  - [ ] 输入数据标准化
  - [ ] 输出结果验收标准
  - [ ] 性能优化建议

- [ ] 更新 API 文档
  - [ ] 参数定义
  - [ ] 返回值说明
  - [ ] 错误代码列表

---

## ✅ 第七阶段：用户培训（培训与市场）

- [ ] **检察官培训**
  - [ ] 制作使用视频（< 5 分钟）
  - [ ] 准备实操演练
  - [ ] 撰写快速入门指南
  - [ ] 建立反馈渠道

- [ ] **技术支持**
  - [ ] 准备常见问题答案
  - [ ] 建立 Helpdesk 流程
  - [ ] 初版文档完成度检查

---

## ✅ 第八阶段：上线前检查（产品评审）

### 功能完整性

- [ ] 所有 8 类罪名已验证
- [ ] 完整的 5 部分输出结构
- [ ] 错误处理完善
- [ ] 前端交互流畅

### 性能指标

- [ ] 响应时间 < 5 秒
- [ ] 错误率 < 1%
- [ ] API 可用性 > 99%
- [ ] 用户反馈满意度 > 80%

### 合规性

- [ ] 数据安全评估通过
- [ ] 法律表述审查通过
- [ ] 隐私保护措施完善
- [ ] 审计日志完整

### 文档齐全

- [ ] 用户手册完成
- [ ] 技术文档完成
- [ ] API 文档完成
- [ ] 故障排查指南完成

---

## ✅ 第九阶段：上线部署（运维）

- [ ] 代码审查通过
- [ ] 部署到预生产环境
- [ ] 预生产环境全面测试（1-2 周）
- [ ] 收集意见反馈
- [ ] 修复发现的问题
- [ ] 部署到生产环境
- [ ] 灰度发布（10% → 50% → 100%）
- [ ] 监控生产环境运行指标
- [ ] 7 天内无重大问题则标记为"稳定"

---

## ✅ 第十阶段：上线后维护（运维与支持）

### 日常监控

- [ ] 每日检查错误日志
- [ ] 每周生成性能报告
- [ ] 每月分析用户反馈

### 持续优化

- [ ] 处理用户反馈
- [ ] 改进 Prompt 模板
- [ ] 增加新的罪名类型
- [ ] 性能优化

### 迭代规划

- [ ] 计划二期功能
  - [ ] 更多罪名
  - [ ] 溯源功能
  - [ ] 证据链可视化
  
- [ ] 建立技术债清单
- [ ] 制定后续改进计划

---

## 📋 checklist 打分标准

### 优秀（Green ✅）
- 所有 checklist 项都已完成
- 测试覆盖率 > 90%
- 零严重 bug
- 用户反馈满意度 > 90%

### 良好（Yellow ⚠️）
- 核心 checklist 项已完成
- 测试覆盖率 > 70%
- 严重 bug 已修复
- 用户反馈满意度 > 80%

### 需要改进（Red ❌）
- 关键功能缺失
- 测试覆盖率 < 70%
- 存在严重 bug
- 用户反馈满意度 < 80%

---

## 📞 各阶段责任人示例

| 阶段 | 主负责人 | 协助部门 | 完成截止 |
|------|---------|---------|---------|
| 第2阶段 | 后端开发 | 法律顾问 | 2026-03-XX |
| 第3阶段 | 法律顾问 | 后端开发 | 2026-03-XX |
| 第4阶段 | 前端开发 | 后端开发 | 2026-03-XX |
| 第5阶段 | QA 测试 | 全体 | 2026-03-XX |
| 第6阶段 | 技术写手 | 全体 | 2026-03-XX |
| 第7阶段 | 培训团队 | 产品/支持 | 2026-03-XX |
| 第8阶段 | 产品经理 | 全体 | 2026-03-XX |
| 第9阶段 | 运维 | 全体 | 2026-03-XX |
| 第10阶段 | 支持团队 | 开发 | 持续 |

---

**版本**：V1.0  
**最后更新**：2026-02-27  
**维护者**：LegalAI 产品团队

✅ 使用此清单跟踪开发进度，确保高质量上线！
